#!/bin/bash

# The spell definition file
JSON_FILE='occultist.json'
API_BASE='https://occultist-io.now.sh/api'

# Terminal colors
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[0;33m'
NC='\033[0m' # No Color

clear
# Occultist icon ANSI colors
cat << "EOF"
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;234m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m.[39m[38;5;232m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;237m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;235m,[39m[38;5;237m:[39m[38;5;239m;[39m[38;5;240mi[39m[38;5;240mi[39m[38;5;239m;[39m[38;5;237m:[39m[38;5;235m,[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m [39m[38;5;233m.[39m[38;5;235m,[39m[38;5;237m:[39m[38;5;239mi[39m[38;5;241mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241mi[39m[38;5;239mi[39m[38;5;237m:[39m[38;5;235m,[39m[38;5;233m.[39m[38;5;232m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;235m,[39m[38;5;238m;[39m[38;5;240mi[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;240mi[39m[38;5;238m;[39m[38;5;235m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;234m.[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;234m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m.[39m[38;5;239mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;102m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;239mi[39m[38;5;232m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;238m;[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;102m1[39m[38;5;240mi[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;235m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;235m,[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;240mi[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;238m;[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;235m,[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;102mi[39m[38;5;239mi[39m[38;5;237m:[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;59m:[39m[38;5;102mi[39m[38;5;144mt[39m[38;5;181mL[39m[38;5;181mL[39m[38;5;144mt[39m[38;5;102mi[39m[38;5;59m:[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;236m,[39m[38;5;59m:[39m[38;5;102m;[39m[38;5;241mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;235m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;241mi[39m[38;5;241m1[39m[38;5;238m;[39m[38;5;236m:[39m[38;5;234m,[39m[38;5;58m.[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;101mi[39m[38;5;144mt[39m[38;5;181mL[39m[38;5;187mC[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;187mC[39m[38;5;187mC[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;187mC[39m[38;5;181mL[39m[38;5;144mf[39m[38;5;101mi[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;58m.[39m[38;5;234m,[39m[38;5;236m:[39m[38;5;238m;[39m[38;5;241m1[39m[38;5;241mi[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m [39m[38;5;239m;[39m[38;5;242m1[39m[38;5;241mi[39m[38;5;236m:[39m[38;5;235m,[39m[38;5;16m [39m[38;5;59m;[39m[38;5;187mC[39m[38;5;138mt[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;138mt[39m[38;5;187mC[39m[38;5;59m;[39m[38;5;16m [39m[38;5;235m,[39m[38;5;236m:[39m[38;5;241mi[39m[38;5;242m1[39m[38;5;239m;[39m[38;5;232m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;237m:[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;239m;[39m[38;5;16m [39m[38;5;101m;[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;187mC[39m[38;5;181mC[39m[38;5;181mL[39m[38;5;187mC[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;224mG[39m[38;5;224mG[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;187mC[39m[38;5;181mL[39m[38;5;187mC[39m[38;5;187mC[39m[38;5;187mG[39m[38;5;187mG[39m[38;5;101m;[39m[38;5;16m [39m[38;5;239m;[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;237m:[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;235m,[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;239m;[39m[38;5;16m [39m[38;5;101mi[39m[38;5;230m0[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;224m0[39m[38;5;101m;[39m[38;5;101m;[39m[38;5;224m0[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m0[39m[38;5;101mi[39m[38;5;16m [39m[38;5;239m;[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;235m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;238m;[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241mi[39m[38;5;234m,[39m[38;5;16m.[39m[38;5;144mt[39m[38;5;224m0[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;224m0[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;224m0[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;224m0[39m[38;5;144mt[39m[38;5;16m.[39m[38;5;234m,[39m[38;5;241mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;238m;[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;235m,[39m[38;5;239m;[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;59m:[39m[38;5;16m.[39m[38;5;95m;[39m[38;5;187mC[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;145mf[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;138mt[39m[38;5;138mt[39m[38;5;138mt[39m[38;5;102mi[39m[38;5;102m1[39m[38;5;224m0[39m[38;5;230m8[39m[38;5;187mC[39m[38;5;95m;[39m[38;5;16m.[39m[38;5;237m:[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;239m;[39m[38;5;235m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m [39m[38;5;236m,[39m[38;5;239mi[39m[38;5;240mi[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;239mi[39m[38;5;23m.[39m[38;5;59m,[39m[38;5;144mf[39m[38;5;224m0[39m[38;5;145mf[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;138m1[39m[38;5;138mt[39m[38;5;145mf[39m[38;5;224m0[39m[38;5;144mf[39m[38;5;59m,[39m[38;5;17m.[39m[38;5;239mi[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;240mi[39m[38;5;239mi[39m[38;5;236m,[39m[38;5;232m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m.[39m[38;5;234m.[39m[38;5;235m,[39m[38;5;236m:[39m[38;5;238m;[39m[38;5;239m;[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;101mi[39m[38;5;187mG[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;230m8[39m[38;5;187mG[39m[38;5;101mi[39m[38;5;16m.[39m[38;5;235m,[39m[38;5;239m;[39m[38;5;238m;[39m[38;5;236m:[39m[38;5;235m,[39m[38;5;234m.[39m[38;5;232m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m.[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;59m,[39m[38;5;144mf[39m[38;5;187mC[39m[38;5;187mC[39m[38;5;187mC[39m[38;5;187mC[39m[38;5;144mf[39m[38;5;59m,[39m[38;5;16m [39m[38;5;232m [39m[38;5;233m.[39m[38;5;232m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;235m,[39m[38;5;236m:[39m[38;5;237m:[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;237m;[39m[38;5;236m:[39m[38;5;234m,[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m.[39m[38;5;59m,[39m[38;5;234m,[39m[38;5;236m:[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;238m;[39m[38;5;237m:[39m[38;5;236m:[39m[38;5;235m,[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;237m:[39m[38;5;239mi[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;241mi[39m[38;5;240mi[39m[38;5;234m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m.[39m[38;5;240mi[39m[38;5;241mi[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;239mi[39m[38;5;237m:[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;233m.[39m[38;5;238m;[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;237m:[39m[38;5;16m [39m[38;5;100m;[39m[38;5;100m;[39m[38;5;16m [39m[38;5;237m:[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;238m;[39m[38;5;233m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;235m,[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;102m;[39m[38;5;59m;[39m[38;5;59m;[39m[38;5;66m;[39m[38;5;102mi[39m[38;5;102m1[39m[38;5;102m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;240mi[39m[38;5;16m [39m[38;5;58m,[39m[38;5;215mf[39m[38;5;215mf[39m[38;5;58m,[39m[38;5;16m [39m[38;5;240mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;102m1[39m[38;5;102mi[39m[38;5;66m;[39m[38;5;59m;[39m[38;5;59m;[39m[38;5;102m;[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;235m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m.[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;58m,[39m[38;5;58m:[39m[38;5;94m;[39m[38;5;100m;[39m[38;5;94m:[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;179mt[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;179mt[39m[38;5;16m.[39m[38;5;59m,[39m[38;5;241m1[39m[38;5;102m1[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;94m:[39m[38;5;100m;[39m[38;5;94m;[39m[38;5;58m:[39m[38;5;58m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;58m,[39m[38;5;94m:[39m[38;5;100m;[39m[38;5;136mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;136mi[39m[38;5;100m;[39m[38;5;100m;[39m[38;5;136mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;136mi[39m[38;5;100m;[39m[38;5;94m:[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;59m,[39m[38;5;59m.[39m[38;5;16m [39m[38;5;100m;[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;100m;[39m[38;5;16m [39m[38;5;59m.[39m[38;5;59m,[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;94m:[39m[38;5;100m;[39m[38;5;136mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;136mi[39m[38;5;100m;[39m[38;5;100m;[39m[38;5;136mi[39m[38;5;137mi[39m[38;5;137mi[39m[38;5;136mi[39m[38;5;100m;[39m[38;5;94m:[39m[38;5;58m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;58m.[39m[38;5;94m:[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;58m.[39m[38;5;16m.[39m[38;5;16m [39m[38;5;232m.[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;58m:[39m[38;5;94m:[39m[38;5;100m;[39m[38;5;100m;[39m[38;5;94m:[39m[38;5;16m [39m[38;5;58m,[39m[38;5;215mf[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;215mf[39m[38;5;58m,[39m[38;5;16m [39m[38;5;94m:[39m[38;5;100m;[39m[38;5;100m;[39m[38;5;94m:[39m[38;5;58m:[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;59m,[39m[38;5;59m,[39m[38;5;59m:[39m[38;5;59m:[39m[38;5;232m.[39m[38;5;16m [39m[38;5;16m.[39m[38;5;58m.[39m[38;5;58m,[39m[38;5;58m,[39m[38;5;94m:[39m[38;5;58m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;232m [39m[38;5;238m;[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;102m1[39m[38;5;241mi[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;102m;[39m[38;5;59m;[39m[38;5;59m:[39m[38;5;16m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;52m.[39m[38;5;179mt[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;179mt[39m[38;5;52m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m.[39m[38;5;59m:[39m[38;5;59m;[39m[38;5;102m;[39m[38;5;102mi[39m[38;5;102mi[39m[38;5;241mi[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;241mi[39m[38;5;238m;[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;237m;[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;241mi[39m[38;5;240mi[39m[38;5;238m;[39m[38;5;234m,[39m[38;5;16m.[39m[38;5;94m:[39m[38;5;179mt[39m[38;5;215mL[39m[38;5;221mL[39m[38;5;221mL[39m[38;5;215mL[39m[38;5;179mt[39m[38;5;94m:[39m[38;5;16m.[39m[38;5;234m,[39m[38;5;238m;[39m[38;5;240mi[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;237m:[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;236m:[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;241m1[39m[38;5;102m;[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;94m:[39m[38;5;137m1[39m[38;5;137m1[39m[38;5;94m:[39m[38;5;16m.[39m[38;5;59m,[39m[38;5;102m;[39m[38;5;241m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;236m:[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;234m,[39m[38;5;241mi[39m[38;5;242m1[39m[38;5;242mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242mi[39m[38;5;102m;[39m[38;5;59m,[39m[38;5;16m.[39m[38;5;16m.[39m[38;5;59m,[39m[38;5;102m;[39m[38;5;242mi[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242m1[39m[38;5;242mi[39m[38;5;242m1[39m[38;5;241mi[39m[38;5;234m,[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;237m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;243m.[39m[38;5;242m.[39m[38;5;59m [39m[38;5;59m [39m[38;5;242m.[39m[38;5;243m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;242m.[39m[38;5;237m.[39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m[38;5;16m [39m
EOF

spinner() {
    i=1
    sp="/-\|"
    echo -n ' '
    while true
    do
        printf "\b${sp:i++%${#sp}:1}"
        sleep .05
    done
}

# Register the spell
if [ $1 = "register" ]; then
    SPELL_NAME=$(jq -r '.name' $JSON_FILE)
    SPELL_VERSION=$(jq -r '.version' $JSON_FILE)
    SPELL_DESCRIPTION=$(jq -r '.description' $JSON_FILE)
    SPELL_TAGS=$(jq -r '.tags' $JSON_FILE)
    SPELL_TAGS_READABLE=$(jq -r '.tags | reduce .[1:][] as $i ("\(.[0])"; . + ", \($i)" )' $JSON_FILE)
    SPELL_TYPE=$(jq -r '.type' $JSON_FILE)
    SPELL_LICENSE=$(jq -r '.license' $JSON_FILE)
    SPELL_REPO=$(git config --get remote.origin.url)
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell name:" "$SPELL_NAME"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell version:" "$SPELL_VERSION"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell description:" "$SPELL_DESCRIPTION"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell tags:" "$SPELL_TAGS_READABLE"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell type:" "$SPELL_TYPE"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell license:" "$SPELL_LICENSE"
    printf "%-20s ${YELLOW}%-20s${NC}\n" "Spell repository:" "$SPELL_REPO"

    spinner &
    SPINNER_PID=$!

    STATUS_CODE=$(curl -s -o /dev/null -w '%{http_code}' -X POST \
        $API_BASE/spell/create \
        -H 'cache-control: no-cache' \
        -H 'content-type: application/json' \
        -d "{
            \"name\": \"$SPELL_NAME\",
            \"repo\": \"$SPELL_REPO\"
        }")

    kill -9 $SPINNER_PID
    wait $SPINNER_PID 2>/dev/null
    printf "\b \n"

    if [ $STATUS_CODE -eq 200 ]; then
        echo -e "\n${GREEN}The spell is successfully registered!${NC}\n"
        exit 0
    elif [ $STATUS_CODE -eq 409 ]; then
        echo -e "\n${YELLOW}The spell is already registered!${NC}\n"
        exit 2
    else
        echo -e "\n${RED}Spell registration is failed!${NC}\n"
        exit 1
    fi

# Install spells
elif [ $1 = "install" ]; then
    if [ ! -f $JSON_FILE ]; then
        echo -e "{\n}" > $JSON_FILE
    fi
    if cat $JSON_FILE | jq -e 'has("dependencies")' > /dev/null; then
        :
    else
        cat $JSON_FILE | jq -r '. += {"dependencies": {}}' > tmp && mv tmp $JSON_FILE
    fi

    # Install all the dependencies
    if [ -z $2 ]; then
        echo "Install all\n"
    # Install and save a specific spell
    else
        SPELL_NAME=$2
        if [ -z $3 ]; then
            BRANCH=master
        else
            BRANCH="v$3"
        fi
        printf "Installing spell: ${YELLOW}${SPELL_NAME} ${BRANCH}${NC}\n"

        spinner &
        SPINNER_PID=$!

        RESPONSE=$(curl -s -w '%{http_code}' -X GET \
            $API_BASE/spell/$SPELL_NAME \
            -H 'cache-control: no-cache' \
            -H 'content-type: application/json')

        STATUS_CODE=$(echo $RESPONSE | tail -c 4)
        RESPONSE=${RESPONSE::-3}
        CLONE_FAIL=false
        BUILD_FAIL=false

        if [ $STATUS_CODE -eq 200 ]; then
            {
                SPELL_REPO=$(echo ${RESPONSE} | jq -r '.repo')

                mkdir -p spells
                cd spells/
                if [ -d "$SPELL_NAME" ]; then rm -rf $SPELL_NAME; fi
                git clone --depth=1 --branch $BRANCH $SPELL_REPO $SPELL_NAME || CLONE_FAIL=true
                cd $SPELL_NAME
                rm -rf .git/
                make || BUILD_FAIL=true
                cd ../..

                if [ $CLONE_FAIL = false ] && [ $BUILD_FAIL = false]; then
                    cat $JSON_FILE | jq -r ".dependencies += {\"${SPELL_NAME}\": \"${BRANCH}\"}" > tmp && mv tmp $JSON_FILE
                fi
            } &> /dev/null

            kill -9 $SPINNER_PID
            wait $SPINNER_PID 2>/dev/null
            printf "\b"

            if [ $CLONE_FAIL = true ]; then
                echo -e "${RED}Installation of ${YELLOW}${SPELL_NAME}${RED} is failed: Version ${YELLOW}${BRANCH}${RED} does not exists!${NC}"
                exit 3
            elif [ $BUILD_FAIL = true ]; then
                echo -e "${RED}Installation of ${YELLOW}${SPELL_NAME}${RED} is failed: Build failure!${NC}"
                exit 4
            fi

            echo -e "${GREEN}The spell ${YELLOW}${SPELL_NAME}${GREEN} is successfully installed!${NC}"
            curl -s -o /dev/null -X GET \
                $API_BASE/spell/install/$SPELL_NAME \
                -H 'cache-control: no-cache' \
                -H 'content-type: application/json'
            exit 0
        elif [ $STATUS_CODE -eq 404 ]; then
            kill -9 $SPINNER_PID
            wait $SPINNER_PID 2>/dev/null
            printf "\b"
            echo -e "${RED}Couldn't find ${YELLOW}${SPELL_NAME}${RED} in the spell index!${NC}"
            exit 5
        else
            kill -9 $SPINNER_PID
            wait $SPINNER_PID 2>/dev/null
            printf "\b"
            echo -e "${RED}Search for the spell is failed!${NC}"
            exit 6
        fi
    fi
fi
